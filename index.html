<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Project1: Images of the Russian Empire</title>
  <style>
    body {
      background-color: #D8C3DD; /* 紫色背景 */
      font-family: Arial, sans-serif;
      color: white;
      margin: 0;
      padding: 0;
    }
    /* 导航栏 */
    nav {
      background: rgba(0, 0, 0, 0.3);
      padding: 10px 20px;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    nav a {
      color: #ffddff;
      text-decoration: none;
      margin: 0 15px;
      font-weight: bold;
    }
    nav a:hover {
      text-decoration: underline;
    }
    .container {
      width: 80%;
      margin: auto;
      padding: 20px;
    }
    h1 {
      text-align: center;
      margin-top: 20px;
    }
    .section {
      background: rgba(0,0,0,0.2);
      padding: 20px;
      margin: 40px 0;
      border-radius: 12px;
    }
    .section h2 {
      color: #ffddff;
      text-align: center;
    }
    img {
      max-width: 100%;
      border-radius: 8px;
    }
    .row {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    .img-block {
      text-align: center;
    }
    .img-block p {
      margin-top: 8px;
      font-size: 16px;
      text-align: center; /* 新增：让文字和图片居中对齐 */
    }
    p {
      text-align: left;
      max-width: 800px;
      margin: auto;
      margin-bottom: 20px;
      font-size: 18px;
    }
  </style>
  <!-- MathJax 支持公式渲染 -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
  <!-- 导航栏 -->
  <nav>
    <a href="#part1">Part1</a>
    <a href="#part2">Part2</a>
    <a href="#part3">Part3</a>
    <a href="#part4">Part4</a>
  </nav>

  <div class="container">
    <h1>Project1: Images of the Russian Empire: Colorizing the Prokudin-Gorskii photo collection</h1>
    <p style="text-align:center; font-style:italic;">Freya Sun</p>

    <!-- Part1 -->
    <div class="section" id="part1">
      <h2>Part1: Single-scale alignment</h2>
      <h3>Method</h3>
      <p>
        For low-resolution images, I used a single-scale alignment approach. The image was first converted to floating point with pixel values normalized to the range [0,1]. It was then split into three color channels (blue, green, and red). The blue channel served as the reference. 
      </p>
      <p>
        For the other two channels, I performed an exhaustive search over a displacement window ([-15, 15] pixels). Each candidate shift was evaluated using <b>Normalized Cross-Correlation (NCC)</b>, defined as:
      </p>
      <p style="text-align:center;">
        $$\text{NCC}(A,B) = \frac{\sum_{x,y} (A(x,y) - \bar{A})(B(x,y) - \bar{B})}{\sqrt{\sum_{x,y}(A(x,y)-\bar{A})^2} \, \sqrt{\sum_{x,y}(B(x,y)-\bar{B})^2}}$$
      </p>
      <p>
        where A and B are the overlapping image regions and \(\bar{A}, \bar{B}\) are their mean values.
      </p>
      <p>
        In each shift, I used <code>np.roll</code> to translate the moving channel. To avoid artifacts from image borders and wrap-around, I applied a <code>crop_interior</code> function to discard a small fraction of the edges before scoring. After determining the optimal displacements for the red and green channels, they were aligned with the blue channel to form the final color image.
      </p>

      <h3>Results</h3>
      <div class="row">
        <div class="img-block">
          <img src="cathedral_out.jpg" alt="cathedral result" width="300">
          <p>cathedral<br>G (5,2), R (12,3)</p>
        </div>
        <div class="img-block">
          <img src="monastery_out.jpg" alt="monastery result" width="300">
          <p>cathedral<br>G (-3,2), R (3,2)</p>
        </div>
        <div class="img-block">
          <img src="tobolsk_out.jpg" alt="tobolsk result" width="300">
          <p>tobolsk<br>G (3,3), R (6,3)</p>
        </div>
      </div>
    </div>

    <!-- Part2 -->
    ... （保持你之前的 Part2/Part3/Part4 不变）
  </div>
</body>
</html>

